{
  "feature_name": "Issue #53修正: hasUpdateロジックを<=から<に変更",
  "status": "completed",
  "api_changes": [
    {
      "endpoint": "getSavedCards",
      "change_type": "logic_fix",
      "field": "hasUpdate",
      "before": "lastKnownUpdatedAt <= master.updatedAt",
      "after": "lastKnownUpdatedAt < master.updatedAt",
      "breaking": false,
      "reason": "markAsViewed後もhasUpdate=trueになるバグを修正"
    }
  ],
  "tests_required": [
    {
      "test_file": "savedCard.integration.test.ts",
      "test_name": "更新検知ロジック - マスターのupdatedAtが同じ場合 hasUpdate=false",
      "status": "already_exists_skipped",
      "action": "enable"
    },
    {
      "test_file": "savedCard.integration.test.ts",
      "test_name": "markAsViewed 後、次回getSavedCardsでhasUpdate=falseになる",
      "status": "already_exists_skipped",
      "action": "enable"
    },
    {
      "test_file": "userStory.integration.test.ts",
      "test_name": "保存した名刺が更新されると hasUpdate フラグで通知される",
      "status": "skipped_infrastructure_limitation",
      "action": "skipped (covered by other tests)"
    },
    {
      "test_file": "userStory.integration.test.ts",
      "test_name": "markAsViewed を呼び出すと lastKnownUpdatedAt が更新される",
      "status": "already_exists_skipped",
      "action": "enable"
    }
  ],
  "client_work_items": [
    {
      "platform": "web",
      "task": "リリースノート確認",
      "description": "閲覧済み名刺の「最新版があります」バッジが正しく消えることを確認",
      "breaking": false,
      "code_change_required": false
    },
    {
      "platform": "ios",
      "task": "リリースノート確認",
      "description": "閲覧済み名刺の「最新版があります」バッジが正しく消えることを確認",
      "breaking": false,
      "code_change_required": false
    }
  ],
  "security_notes": [
    "認証・認可への影響なし",
    "入力バリデーションへの影響なし",
    "純粋なロジック修正"
  ],
  "breaking_changes": false,
  "notes_for_frontend": "この修正により、markAsViewed後にhasUpdate=falseになります。これはバグ修正であり、期待通りの動作です。コード変更は不要ですが、閲覧済み名刺のバッジが正しく消えることを確認してください。",
  "backend_commit_sha": "f531a316a2bab89b0082b6246b06f0fdac74e45d",
  "pr_url": "https://github.com/yutaro0915/devcard_functions/pull/58",
  "related_issues": ["#53"],
  "estimated_effort": "10分（契約1行 + 実装1行 + テスト有効化5箇所）"
}
